<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>My Favorite Music</title>
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>

    <style>
      body {
        padding: 0;
        margin: 0;
      }
      div {
        width: 100%;
        height: 100%;
        font-size: 16px;
      }
    </style>
    <script src="./data.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w" crossorigin="anonymous">
    <script type="text/jsx" src="audioTrack.jsx"></script>
    <script type="text/babel">
/*        class Table extends React.Component {
          constructor(props) {
              super(props);
              this.state = {url: "", title: ""};
              this.handleChange = this.handleChange.bind(this);
              this.playEnd = this.playEnd.bind(this);
           }

          handleChange(e) {
            e.preventDefault();
            this.url = "https://drive.google.com/uc?id=" + e.target.value + "&authuser=0&export=download";
            this.title = e.target.dataset.title;

            this.setState({url: this.url, title: this.title});
          }

          playEnd(e){
              let track = Math.floor((Math.random() * this.props.list.length) + 1);
              this.url = "https://drive.google.com/uc?id=" + this.props.list[track][0] + "&authuser=0&export=download";
              this.title = this.props.list[track][1];
              this.setState({url: this.url, title: this.title});
          }

          render() {
            return (
              <div>
                 <table className="pure-table">
                  <thead>
                      <tr>
                          <td>Soundtrack</td>
                          <td>Play</td>
                      </tr>
                  </thead>
                  <tbody>
                    {
                      this.props.list.map( (list, i) => {
                          return <tr className={i%2==0 ? 'pure-table-odd' : ''} key={list[0]}>
                                <td>
                        {list.length > 2 &&
                                  
                                    <a href="https://drive.google.com/uc?id={list[2]}&authuser=0&export=download">{list[1]}</a>
                        }
                        {list.length ==2 &&
                                    list[1]
                                 
                        }</td>
                            <td><button type="button" className="pure-button pure-button-primary" data-title={list[1]} onClick={this.handleChange} value={list[0]}>Play</button></td>

                        </tr>
                     })
                    }
                  </tbody>
                  <tfoot>
                      <tr>
                          <td colSpan="5">
                              <b>{this.state.title}</b>
                          </td>
                      </tr>
                  </tfoot>
                </table>
                <div>
                  <audio controls src={this.state.url} autoPlay onEnded={this.playEnd}></audio>
                </div>
              </div>
            )
          }
        }
*/
        class Menu extends React.Component {
          constructor(props) {
            super(props);
            this.state = {cat: '粵講越有趣', subCat: '唐詩七絕選賞 - 陳耀南教授主講', list : ycanList};
            this.handleChange = this.handleChange.bind(this);
          }

          handleChange(e) {
            e.preventDefault();
            this.cat = e.target.dataset.cat;
            this.subCat = e.target.dataset.subcat;

            if (this.subCat == '唐詩七絕選賞 - 陳耀南教授主講')
            {
              this.list = ycanList
            }
            else if (this.subCat == '葉培')
            {
              this.list = yePeiList
            }

            this.setState({cat: this.cat, subCat: this.subCat, list: this.list});
          }

          render() {
            return (
              <div>
                <div className="pure-menu pure-menu-horizontal">
                    <ul className="pure-menu-list">
                        <li className="pure-menu-item"><a href="#" onClick={this.handleChange} data-cat="粵講越有趣" data-subcat="唐詩七絕選賞 - 陳耀南教授主講" className="pure-menu-link">粵講越有趣</a></li>
                         <li className="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
                          <a href="#" id="menuLink1" className="pure-menu-link">大城小事</a>
                          <ul className="pure-menu-children">
                              <li className="pure-menu-item"><a href="#" onClick={this.handleChange} data-cat="大城小事" data-subcat="葉培" className="pure-menu-link">葉培</a></li>
                          </ul>
                        </li>
                        <li className="pure-menu-item"><a href="#" onClick={this.handleChange} className="pure-menu-link">Sports</a></li>
                        <li className="pure-menu-item"><a href="#" onClick={this.handleChange} className="pure-menu-link">Finance</a></li>
                    </ul>
                </div>
                <h1>{this.state.cat}</h1>
                <h2>{this.state.subCat}</h2>
                <AudioTrack list={this.state.list} />
             </div>
            )
          }
        }

        ReactDOM.render(<Menu />, document.getElementById('root'));
    </script>


</head>

<body>
  <div id="root"></div>
</body>
</html>